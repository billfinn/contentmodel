<%  @component = Component.find(params[:id])
    @template = ::Template.find(params[:template])
    @site = Site.find(params[:site])





%>

  <div class="row">
		<div class="col-sm-3">

      <%= render "siteMap" %>


			<h3>Notes</h3>

      <!-- Display Component relationships -->
            <p>Component: <br><%= @component.name %>

              <p>Components:
              <% @cinstance = TemplateComponent.order(:position).includes(:component, :template).references(:component, :template).where ({template_id: @template.id}) %>
              <ol>
                <!-- top version includes component instance ID for debugging -->
                <%#= safe_join ( @cinstance.all.map { |x| ["<li>".html_safe, x.id, " ", link_to(x.component.name, text_item_index_path(:id => x.component.id, :instance => x.id, :template => x.template.id, :page => @thispage.id, :site => @site.id)),"</li>".html_safe] }) %>
                <%= safe_join ( @cinstance.all.map { |x| ["<li>".html_safe, link_to(x.component.name, component_path(:id => x.component.id, :template => x.template.id, :site => @site.id)),"</li>".html_safe] }) %>
              </ol>
              </p>

              <p>Template: <br><%= link_to @template.name, templatedetail_path(:id => @template.id, :site => @site.id ) %>
                  <p>Site: <br><%= link_to @site.name, templatelist_path(:id => @site.id) %>

		</div>
		<div class="col-sm-9">
			<h1>Component</h1>


<!-- Component guidelines -->
      <div class="card">
        <div class="card-header">
          <h3><%= @component.name %> <% if @component.componenttype_id == 1 %>
                    <span class="badge badge-light">Existing</span>
                  <% else %>
                  <% end %>
                  <% if @component.componenttype_id == 2 %>
                    <span class="badge badge-light">Existing->Update</span>
                  <% else %>
                  <% end %></h3>
        </div>
        <div class="card-body">
          <span class="badge badge-secondary" style="margin-bottom: 20px;">Component Text Elements</span><br>
          <%# @pagetext = TextItem.order(:order).where ({page_id: nil , component_id: @component.id}) %>
          <% @component.text_items.each do |textitem| %>
            <<%= textitem.text.name %>><%= textitem.name %></<%= textitem.text.name %>>
          <% end %>

          <table class="table table-hover" style="margin-top:30px;">
            <thead>
              <tr>
                <th scope="col">Attribute</th>
                <th scope="col">Description</th>
              </tr>
            </thead>
            <tbody>
              <% if @component.invision_link.blank? %>
              <% else %>
              <tr>
                <td scope="row">Invision Link</td>
                <td><i><%= @component.invision_link.html_safe %></i></td>
              </tr>
              <% end %>
              <tr>
                <td scope="row">Tag Groups</td>
                <td><% if @component.tag_groups.blank? %><i>No tag groups will display.</i><% else %><i><%= @component.tag_groups %></i><% end %></td>
              </tr>
              <tr>
                <td scope="row">Personalization</td>
                <td><% if @component.personalization_rules.blank? %><i>No personalization on this component.</i></i><% else %><i><%= @component.personalization_rules.html_safe %><% end %></td>
              </tr>
              <tr>
                <td scope="row">Goal</td>
                <td><i><%= @component.goal %></i></td>
              </tr>
              <tr>
                <td scope="row">CTA</td>
                <td><i><%= @component.cta %></i></td>
              </tr>
              <tr>
                <td scope="row">Full-Width</td>
                <td><i>
                  <% case @component.full_width %>
                    <% when 0 %>
                      No
                    <% when 1 %>
                      Yes
                    <% when blank? %>
                      no
                    <% else %><% end %>
                  </i></td>
              </tr>
              <tr>
                <td scope="row">Data</td>
                <td><i><%= @component.data.html_safe %></i></td>
              </tr>
              <tr>
                <td scope="row">Requirements</td>
                <td><i><%= @component.requirements.html_safe %></i></td>
              </tr>
              <tr>
                <td scope="row">Description</td>
                <td><i><%= @component.description %></i></td>
              </tr>
              <tr>
                <td scope="row">Interaction Notes</td>
                <td><i><%= @component.interaction_notes %></i></td>
              </tr>
              <tr>
            </tbody>
          </table>
        </div>
      </div>


		</div>
	</div>
  	<hr>
  <div class="row">
    <div class="col-sm">

              <%= render "footer" %>

    </div>
  </div>
