
<% @thispage = Page.find(params[:id])
   @site = Site.find(params[:site])





    %>
  <!-- <div class="row">
    <div class="col-sm">
      <div class="alert alert-warning" role="alert">
        This page is under development for information display.
      </div>
    </div>
  </div> -->
  <div class="row">
		<div class="col-sm-3">

            <%= render "siteMap" %>

      <!-- <p>User Workflow > Template
      <p>Breadcrumbs > Information Architecture path
        <hr> -->
      <h3>Notes</h3>
      <p><i></i></p>
          <hr>

      <h3>Tags</h3>
      <% @pagetags = TagMapping.where page_id: (params[:id]) %>
        <% if @pagetags.empty? %>
          <p class="text-muted">No tags assigned.</p>
        <% end %>
      <% @pagetags.each do |t| %>
            <a href="#" class="badge badge-info"><%= t.tag.name %></a>
      <% end %>
          <hr>
      <h3>SEO Terms</h3>
      <% @pageterms = SeoMapping.where page_id: (params[:id]) %>
        <% if @pageterms.empty? %>
          <p class="text-muted">No SEO terms assigned.</p>
        <% end %>
      <% @pageterms.each do |s| %>
          <%= s.term.name + (", ").html_safe %>
      <% end %>

      <!-- <h3>Desired Actions</h3> -->
		</div>
		<div class="col-sm-9">
      <!-- hack to display the page name if not yet associated with a template (all pages should be associated with a template) -->
      <% if @thispage.templates.empty? %>
        <h1><%= @thispage.name %></h1>
        <p class="text-muted">This page requires template and content configuration.</p>
      <% end %>

      <% @thispage.templates.each do |c| %>

      <h1><%= @thispage.name %></h1>
            <hr>
      <h5>Template</h5>
      <p><%= link_to c.name, templatedetail_path(:id => c.id, :site => @site.id) %></p>

          <!-- display Messaging Hierarchy assigned to the template for this page -->
          <% c.hierarchies.each do |h| %>
            <h6>Messaging Hierarchy</h6>
            <h6 class="text-muted"><%= h.name %></h6>
            <p><small class="text-muted"><%= h.description %></small></p>
          <% end %>

          <h5>Template Components</h5>
            Click to view detail and customize template content for page.</small>
          <ol>
          <% c.components.each do |b| %>
              <li><%= link_to b.name, text_item_index_path(:id => b.id, :template => c.id, :page => @thispage.id, :site => @site.id) %></li>
          <% end %>
          </ol>

      <h5>Page Content</h5>


      <% c.components.each do |pc| %>
      <% @pagetext = TextItem.order(:order).where ({page_id: @thispage.id, component_id: pc.id}) %>
          <div style="border:1px solid #999; padding:15px; margin-bottom: 20px;">
            <small class="text-muted">ComponentID <%= pc.id %> | PageID <%= @thispage.id %></small></br>

            <% @pagetext.each do |pt| %>
              <<%= pt.text.name %>><%#= pt.order %><%= pt.itemtext %></<%= pt.text.name %>>
            <% end %>
          </div>
      <% end %>

      <!-- below is the closing tag for the templates.each do |c| -->
      <% end %>
		</div>
	</div>
  	<hr>
  <div class="row">
    <div class="col-sm">

              <%= render "footer" %>

    </div>
  </div>
